<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Flirty Roasts - Practice</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Mic = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                <line x1="12" y1="19" x2="12" y2="23"></line>
                <line x1="8" y1="23" x2="16" y2="23"></line>
            </svg>
        );

        const MicOff = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="2" y1="2" x2="22" y2="22"></line>
                <path d="M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"></path>
                <path d="M5 10v2a7 7 0 0 0 12 5"></path>
                <path d="M15 9.34V5a3 3 0 0 0-5.68-1.33"></path>
                <path d="M9 9v3a3 3 0 0 0 5.12 2.12"></path>
                <line x1="12" y1="19" x2="12" y2="23"></line>
                <line x1="8" y1="23" x2="16" y2="23"></line>
            </svg>
        );

        const Volume2 = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
            </svg>
        );

        const RotateCcw = ({ size = 16, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                <path d="M3 3v5h5"></path>
            </svg>
        );

        const CheckCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22,4 12,14.01 9,11.01"></polyline>
            </svg>
        );

        const XCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const Heart = ({ size = 28, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );

        const Users = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        const MessageCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
            </svg>
        );

        const EnglishRoastApp = () => {
            const [currentTask, setCurrentTask] = useState(null);
            const [userAnswer, setUserAnswer] = useState('');
            const [showResult, setShowResult] = useState(null);
            const [score, setScore] = useState({ correct: 0, total: 0 });
            const [isRecording, setIsRecording] = useState(false);
            const [activeTab, setActiveTab] = useState('tasks');
            const [selectedCategory, setSelectedCategory] = useState('all');

            const vocabulary = {
                basic: {
                    'low maintenance': {
                        definition: '–Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã–π/–∞—è, –Ω–µ—Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π/–∞—è',
                        example: 'She says she is low maintenance, but she needs everything perfect (–û–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–∞—è, –Ω–æ –µ–π –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –≤—Å—ë –±—ã–ª–æ –∏–¥–µ–∞–ª—å–Ω–æ)',
                        forms: '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–∞–ª–æ —Ç—Ä–µ–±—É—é—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö',
                        phrases: ['high maintenance (–æ—á–µ–Ω—å —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π)', 'low-key (—Å–ø–æ–∫–æ–π–Ω—ã–π, —Å–∫—Ä–æ–º–Ω—ã–π)']
                    },
                    'main character energy': {
                        definition: '—ç–Ω–µ—Ä–≥–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è (—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è —Ü–µ–Ω—Ç—Ä–æ–º –≤—Å–µ–ª–µ–Ω–Ω–æ–π)',
                        example: 'You have got main character energy (–£ —Ç–µ–±—è —ç–Ω–µ—Ä–≥–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è)',
                        forms: '–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö - —á–µ–ª–æ–≤–µ–∫ –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ –≥–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π —Ñ–∏–ª—å–º–∞ –æ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏',
                        phrases: ['main character syndrome', 'protagonist vibes']
                    },
                    'didn\'t get the memo': {
                        definition: '–Ω–µ –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–∏–¥–∏–æ–º–∞: –Ω–µ –≤ –∫—É—Ä—Å–µ, –Ω–µ –∑–Ω–∞–µ—Ç)',
                        example: 'Your Wi-Fi didn\'t get the memo (–¢–≤–æ–π Wi-Fi –Ω–µ –≤ –∫—É—Ä—Å–µ)',
                        forms: '–ò—Ä–æ–Ω–∏—á–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ - –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –∏–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º',
                        phrases: ['missed the memo', 'out of the loop (–Ω–µ –≤ –∫—É—Ä—Å–µ)']
                    },
                    'take forever': {
                        definition: '–∑–∞–Ω–∏–º–∞—Ç—å –≤–µ—á–Ω–æ—Å—Ç—å, –æ—á–µ–Ω—å –¥–æ–ª–≥–æ –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ',
                        example: 'You take forever to reply (–¢—ã –≤–µ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—á–∞–µ—à—å)',
                        forms: 'take forever + to + verb (–∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤)',
                        phrases: ['takes ages', 'takes a long time']
                    }
                },
                bali: {
                    'emotionally spiral': {
                        definition: '—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–ø–∏—Ä–∞–ª—å (–≤–ø–∞–¥–∞—Ç—å –≤ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)',
                        example: 'You meditate for 10 minutes and then emotionally spiral for 2 hours (–¢—ã –º–µ–¥–∏—Ç–∏—Ä—É–µ—à—å 10 –º–∏–Ω—É—Ç, –∞ –ø–æ—Ç–æ–º 2 —á–∞—Å–∞ –≤ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–ø–∏—Ä–∞–ª–∏)',
                        forms: 'spiral = –∑–∞–∫—Ä—É—á–∏–≤–∞—Ç—å—Å—è, –∏–¥—Ç–∏ –ø–æ —Å–ø–∏—Ä–∞–ª–∏ (–æ–±—ã—á–Ω–æ –≤–Ω–∏–∑)',
                        phrases: ['spiral out of control', 'downward spiral']
                    },
                    'didn\'t text back': {
                        definition: '–Ω–µ –æ—Ç–≤–µ—Ç–∏–ª(–∞) –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ',
                        example: 'Someone didn\'t text back (–ö—Ç–æ-—Ç–æ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ)',
                        forms: 'text back = –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (phrasal verb)',
                        phrases: ['text me back', 'message back', 'get back to me']
                    },
                    'focusing on myself': {
                        definition: '—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–µ–±–µ',
                        example: 'I am focusing on myself this time (–Ø —Ñ–æ–∫—É—Å–∏—Ä—É—é—Å—å –Ω–∞ —Å–µ–±–µ –≤ —ç—Ç–æ—Ç —Ä–∞–∑)',
                        forms: 'focus on + object/gerund (—Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ –∏–ª–∏ –≥–µ—Ä—É–Ω–¥–∏–π)',
                        phrases: ['work on myself', 'prioritize myself']
                    },
                    'emotional stability': {
                        definition: '—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å',
                        example: 'A guy with zero emotional stability (–ü–∞—Ä–µ–Ω—å —Å –Ω—É–ª–µ–≤–æ–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é)',
                        forms: 'stability = —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (—Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ)',
                        phrases: ['emotionally stable', 'mental stability']
                    }
                },
                savage: {
                    'plot twists': {
                        definition: '–ø–æ–≤–æ—Ä–æ—Ç—ã —Å—é–∂–µ—Ç–∞, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è',
                        example: 'Your love life has more plot twists than a Netflix thriller (–í —Ç–≤–æ–µ–π –ª–∏—á–Ω–æ–π –∂–∏–∑–Ω–∏ –±–æ–ª—å—à–µ –ø–æ–≤–æ—Ä–æ—Ç–æ–≤, —á–µ–º –≤ —Ç—Ä–∏–ª–ª–µ—Ä–µ Netflix)',
                        forms: 'plot twist = –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç —Å–æ–±—ã—Ç–∏–π',
                        phrases: ['unexpected turn', 'surprise twist']
                    },
                    'emotionally unavailable': {
                        definition: '—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π',
                        example: 'Emotionally unavailable men with good jawlines (–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –º—É–∂—á–∏–Ω—ã —Å –∫—Ä–∞—Å–∏–≤–æ–π —á–µ–ª—é—Å—Ç—å—é)',
                        forms: 'unavailable = –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π (–ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ)',
                        phrases: ['emotionally distant', 'commitment issues']
                    },
                    'toxic energy': {
                        definition: '—Ç–æ–∫—Å–∏—á–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è',
                        example: 'I am done with toxic energy (–Ø –ø–æ–∫–æ–Ω—á–∏–ª–∞ —Å —Ç–æ–∫—Å–∏—á–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π)',
                        forms: 'toxic = —è–¥–æ–≤–∏—Ç—ã–π, —Ç–æ–∫—Å–∏—á–Ω—ã–π (–ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ)',
                        phrases: ['toxic person', 'negative vibes', 'bad energy']
                    },
                    'sky-high': {
                        definition: '–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π, –∑–∞–æ–±–ª–∞—á–Ω—ã–π',
                        example: 'Your standards are sky-high (–¢–≤–æ–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–µ)',
                        forms: '—Å–ª–æ–∂–Ω–æ–µ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ (hyphenated adjective)',
                        phrases: ['extremely high', 'through the roof']
                    }
                },
                romantic: {
                    'get attached': {
                        definition: '–ø—Ä–∏–≤—è–∑–∞—Ç—å—Å—è (—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
                        example: 'You get emotionally attached to a guy (–¢—ã —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—à—å—Å—è –∫ –ø–∞—Ä–Ω—é)',
                        forms: 'get attached to + somebody/something',
                        phrases: ['become attached', 'form an attachment', 'catch feelings']
                    },
                    'keep the mystery alive': {
                        definition: '–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–Ω—Ç—Ä–∏–≥—É, –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∑–∞–≥–∞–¥–æ—á–Ω–æ–π',
                        example: 'Pretending you didn\'t see the message to keep the mystery alive (–ü—Ä–∏—Ç–≤–æ—Ä—è–µ—à—å—Å—è, —á—Ç–æ –Ω–µ –≤–∏–¥–µ–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∑–∞–≥–∞–¥–æ—á–Ω–æ–π)',
                        forms: 'keep + object + adjective (–¥–µ—Ä–∂–∞—Ç—å —á—Ç–æ-—Ç–æ –≤ –∫–∞–∫–æ–º-—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏)',
                        phrases: ['stay mysterious', 'remain enigmatic']
                    },
                    'chakras aligned': {
                        definition: '—á–∞–∫—Ä—ã –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã (—à—É—Ç–ª–∏–≤–æ: –∏–¥–µ–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)',
                        example: 'Your chakras are already aligned (–¢–≤–æ–∏ —á–∞–∫—Ä—ã —É–∂–µ –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã)',
                        forms: 'aligned = –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã, –Ω–∞ –æ–¥–Ω–æ–π –ª–∏–Ω–∏–∏',
                        phrases: ['energies match', 'vibes align', 'on the same wavelength']
                    },
                    'fall for someone': {
                        definition: '–≤–ª—é–±–∏—Ç—å—Å—è –≤ –∫–æ–≥–æ-—Ç–æ',
                        example: 'When he finally falls for you (–ö–æ–≥–¥–∞ –æ–Ω –Ω–∞–∫–æ–Ω–µ—Ü –≤ —Ç–µ–±—è –≤–ª—é–±–∏—Ç—Å—è)',
                        forms: 'fall for + somebody (phrasal verb)',
                        phrases: ['fall in love with', 'develop feelings for']
                    }
                }
            };

            const sampleTasks = [
                // Basic expressions
                {type:'translation_en_ru',category:'basic',question:'Translate: "low maintenance"',answer:'–Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–∞—è',alternatives:['–Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤–∞—è','–Ω–µ—Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è','–Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã–π'],word:'low maintenance'},
                {type:'translation_ru_en',category:'basic',question:'–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ: "—ç–Ω–µ—Ä–≥–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è"',answer:'main character energy',alternatives:['main character energy'],word:'main character energy'},
                {type:'multiple_choice',category:'basic',question:'Your Wi-Fi didn\'t ___ the memo',options:['get','take','have','make'],correct:0,word:'didn\'t get the memo'},
                {type:'fill_blanks',category:'basic',question:'Fill in: You ___ forever to reply',answer:'take',hint:'(verb for spending time)',word:'take forever'},
                {type:'translation_en_ru',category:'basic',question:'Translate: "You think you are mysterious"',answer:'—Ç—ã –¥—É–º–∞–µ—à—å —á—Ç–æ —Ç—ã –∑–∞–≥–∞–¥–æ—á–Ω–∞—è',alternatives:['—Ç—ã –¥—É–º–∞–µ—à—å —á—Ç–æ —Ç—ã –∑–∞–≥–∞–¥–æ—á–Ω–∞—è','—Ç—ã –¥—É–º–∞–µ—à—å —Ç—ã –∑–∞–≥–∞–¥–æ—á–Ω–∞—è','—Ç—ã —Å—á–∏—Ç–∞–µ—à—å —Å–µ–±—è –∑–∞–≥–∞–¥–æ—á–Ω–æ–π'],word:'mysterious'},
                
                // Bali lifestyle
                {type:'translation_en_ru',category:'bali',question:'Translate: "emotionally spiral"',answer:'—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–ø–∏—Ä–∞–ª—å',alternatives:['—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–ø–∏—Ä–∞–ª—å','–≤–ø–∞–¥–∞—Ç—å –≤ —ç–º–æ—Ü–∏–∏','—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å—Ä—ã–≤–∞—Ç—å—Å—è'],word:'emotionally spiral'},
                {type:'multiple_choice',category:'bali',question:'Someone didn\'t ___ back',options:['text','texting','texted','texts'],correct:0,word:'didn\'t text back'},
                {type:'translation_ru_en',category:'bali',question:'–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ: "–Ø —Ñ–æ–∫—É—Å–∏—Ä—É—é—Å—å –Ω–∞ —Å–µ–±–µ"',answer:'i am focusing on myself',alternatives:['i am focusing on myself','i focus on myself'],word:'focusing on myself'},
                {type:'fill_blanks',category:'bali',question:'Fill in: A guy with zero emotional ___',answer:'stability',hint:'(noun: —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)',word:'emotional stability'},
                {type:'situational',category:'bali',question:'Situation: Your friend meditates but then worries for hours. What do you say?',context:'Use "emotionally spiral"',expectedElements:['spiral','emotionally'],word:'emotionally spiral'},
                {type:'listening',category:'bali',question:'Listen and repeat: "I\'m focusing on myself this time"',audio:'I\'m focusing on myself this time',word:'focusing on myself'},
                
                // Savage expressions
                {type:'translation_en_ru',category:'savage',question:'Translate: "plot twists"',answer:'–ø–æ–≤–æ—Ä–æ—Ç—ã —Å—é–∂–µ—Ç–∞',alternatives:['–ø–æ–≤–æ—Ä–æ—Ç—ã —Å—é–∂–µ—Ç–∞','–Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã'],word:'plot twists'},
                {type:'multiple_choice',category:'savage',question:'___ unavailable men',options:['Emotionally','Emotional','Emotion','Emotions'],correct:0,word:'emotionally unavailable'},
                {type:'translation_ru_en',category:'savage',question:'–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ: "—Ç–æ–∫—Å–∏—á–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è"',answer:'toxic energy',alternatives:['toxic energy','toxic vibes'],word:'toxic energy'},
                {type:'fill_blanks',category:'savage',question:'Fill in: Your standards are ___-high',answer:'sky',hint:'(–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã)',word:'sky-high'},
                {type:'situational',category:'savage',question:'Situation: Describe someone who is never emotionally available',context:'Use the adjective form',expectedElements:['emotionally unavailable','unavailable'],word:'emotionally unavailable'},
                {type:'listening',category:'savage',question:'Listen and repeat: "I\'m done with toxic energy"',audio:'I\'m done with toxic energy',word:'toxic energy'},
                
                // Romantic/flirty
                {type:'translation_en_ru',category:'romantic',question:'Translate: "get emotionally attached"',answer:'—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å—Å—è',alternatives:['—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å—Å—è','–ø—Ä–∏–≤—è–∑–∞—Ç—å—Å—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ'],word:'get attached'},
                {type:'multiple_choice',category:'romantic',question:'Keep the mystery ___',options:['alive','live','living','life'],correct:0,word:'keep the mystery alive'},
                {type:'translation_ru_en',category:'romantic',question:'–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ: "–≤–ª—é–±–∏—Ç—å—Å—è –≤ –∫–æ–≥–æ-—Ç–æ"',answer:'fall for someone',alternatives:['fall for someone','fall in love with someone'],word:'fall for someone'},
                {type:'fill_blanks',category:'romantic',question:'Fill in: Your chakras are already ___',answer:'aligned',hint:'(–≤—ã—Ä–æ–≤–Ω–µ–Ω—ã)',word:'chakras aligned'},
                {type:'situational',category:'romantic',question:'Situation: He finally loves you. How to say it using phrasal verb?',context:'Use "fall for"',expectedElements:['fall','for'],word:'fall for someone'},
                {type:'listening',category:'romantic',question:'Listen and repeat: "When he finally falls for you"',audio:'When he finally falls for you',word:'fall for someone'},
                
                // Mixed/Advanced
                {type:'multiple_choice',category:'all',question:'She says "I\'m ___ looking for drama"',options:['not','no','none','never'],correct:0,word:'mixed'},
                {type:'translation_en_ru',category:'all',question:'Translate: "Your phone battery dies faster than your interest"',answer:'—Ç–≤–æ—è –±–∞—Ç–∞—Ä–µ—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–∞–¥–∏—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ —á–µ–º —Ç–≤–æ–π –∏–Ω—Ç–µ—Ä–µ—Å',alternatives:['—Ç–≤–æ—è –±–∞—Ç–∞—Ä–µ—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–∞–¥–∏—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ —á–µ–º —Ç–≤–æ–π –∏–Ω—Ç–µ—Ä–µ—Å','–±–∞—Ç–∞—Ä–µ—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Ä–∞–∑—Ä—è–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–∞'],word:'mixed'},
                {type:'situational',category:'all',question:'Situation: Roast someone who says they want peace but creates drama',context:'Be creative and use vocabulary from lessons',expectedElements:['drama','peace','energy','toxic'],word:'mixed'}
            ];

            const generateRandomTask = () => {
                const filteredTasks = selectedCategory === 'all' 
                    ? sampleTasks 
                    : sampleTasks.filter(task => task.category === selectedCategory);
                
                const randomTask = filteredTasks[Math.floor(Math.random() * filteredTasks.length)];
                setCurrentTask({...randomTask, id: Date.now()});
                setUserAnswer('');
                setShowResult(null);
            };

            const checkAnswer = () => {
                if (!currentTask) return;
                
                let isCorrect = false;
                
                switch(currentTask.type) {
                    case 'multiple_choice':
                        isCorrect = parseInt(userAnswer) === currentTask.correct;
                        break;
                    case 'translation_ru_en':
                    case 'translation_en_ru':
                    case 'fill_blanks':
                        const normalizedAnswer = userAnswer.toLowerCase().trim();
                        if (currentTask.alternatives) {
                            isCorrect = currentTask.alternatives.some(alt => 
                                alt.toLowerCase() === normalizedAnswer
                            );
                        } else {
                            isCorrect = normalizedAnswer === currentTask.answer.toLowerCase();
                        }
                        break;
                    case 'situational':
                        isCorrect = currentTask.expectedElements.some(element =>
                            userAnswer.toLowerCase().includes(element.toLowerCase())
                        );
                        break;
                    default:
                        isCorrect = true;
                }
                
                setScore(prev => ({
                    correct: prev.correct + (isCorrect ? 1 : 0),
                    total: prev.total + 1
                }));
                
                setShowResult(isCorrect);
            };

            const speakText = (text) => {
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    const setVoice = () => {
                        const voices = window.speechSynthesis.getVoices();
                        const preferredVoices = [
                            voices.find(voice => voice.name.toLowerCase().includes('google') && voice.lang.startsWith('en')),
                            voices.find(voice => voice.name.toLowerCase().includes('microsoft') && voice.lang.startsWith('en')),
                            voices.find(voice => voice.lang === 'en-US'),
                            voices.find(voice => voice.lang.startsWith('en'))
                        ];
                        
                        const selectedVoice = preferredVoices.find(voice => voice !== undefined);
                        if (selectedVoice) utterance.voice = selectedVoice;
                        
                        try {
                            window.speechSynthesis.speak(utterance);
                        } catch (error) {
                            console.error('Speech error:', error);
                        }
                    };
                    
                    if (window.speechSynthesis.getVoices().length > 0) {
                        setVoice();
                    } else {
                        window.speechSynthesis.onvoiceschanged = () => {
                            setVoice();
                            window.speechSynthesis.onvoiceschanged = null;
                        };
                        setTimeout(() => {
                            if (window.speechSynthesis.getVoices().length === 0) {
                                window.speechSynthesis.speak(utterance);
                            }
                        }, 1000);
                    }
                }
            };

            const startRecording = async () => {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    alert('Your browser does not support speech recognition. Try Chrome or Edge.');
                    return;
                }

                try {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    const recognition = new SpeechRecognition();
                    
                    recognition.lang = 'en-US';
                    recognition.continuous = false;
                    recognition.interimResults = false;
                    
                    recognition.onstart = () => {
                        setIsRecording(true);
                        setUserAnswer('Speak now...');
                    };
                    
                    recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript.trim();
                        setUserAnswer(transcript);
                        setIsRecording(false);
                        
                        if (currentTask && currentTask.type === 'listening') {
                            setTimeout(() => {
                                checkAnswer();
                            }, 1000);
                        }
                    };
                    
                    recognition.onerror = (event) => {
                        setIsRecording(false);
                        setUserAnswer('Error: ' + event.error);
                    };
                    
                    recognition.onend = () => {
                        setIsRecording(false);
                    };
                    
                    recognition.start();
                    
                } catch (error) {
                    setIsRecording(false);
                    setUserAnswer('Failed to start speech recognition');
                }
            };

            const stopRecording = () => {
                setIsRecording(false);
            };

            useEffect(() => {
                generateRandomTask();
            }, [selectedCategory]);

            const renderTask = () => {
                if (!currentTask) return null;

                switch(currentTask.type) {
                    case 'multiple_choice':
                        return (
                            <div className="space-y-4">
                                <p className="text-lg font-medium">{currentTask.question}</p>
                                <div className="grid grid-cols-2 gap-2">
                                    {currentTask.options.map((option, index) => (
                                        <button
                                            key={index}
                                            onClick={() => setUserAnswer(index.toString())}
                                            className={`p-3 border rounded-lg transition-colors ${
                                                userAnswer === index.toString()
                                                    ? 'bg-pink-500 text-white'
                                                    : 'bg-white hover:bg-pink-50'
                                            }`}
                                        >
                                            {option}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        );
                    
                    case 'listening':
                        return (
                            <div className="space-y-4">
                                <p className="text-lg font-medium">{currentTask.question}</p>
                                <button
                                    onClick={() => speakText(currentTask.audio)}
                                    className="flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600"
                                >
                                    <Volume2 size={20} />
                                    Listen
                                </button>
                                <div className="flex items-center gap-2">
                                    <button
                                        onClick={isRecording ? stopRecording : startRecording}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-lg ${
                                            isRecording 
                                                ? 'bg-red-500 hover:bg-red-600' 
                                                : 'bg-blue-500 hover:bg-blue-600'
                                        } text-white`}
                                    >
                                        {isRecording ? <MicOff size={20} /> : <Mic size={20} />}
                                        {isRecording ? 'Stop' : 'Record'}
                                    </button>
                                </div>
                            </div>
                        );
                    
                    case 'situational':
                        return (
                            <div className="space-y-4">
                                <div className="bg-purple-50 p-4 rounded-lg">
                                    <h3 className="font-semibold text-purple-800">Situation:</h3>
                                    <p className="text-purple-700">{currentTask.question}</p>
                                    {currentTask.context && (
                                        <p className="text-sm text-purple-600 mt-2">
                                            Context: {currentTask.context}
                                        </p>
                                    )}
                                </div>
                                <textarea
                                    value={userAnswer}
                                    onChange={(e) => setUserAnswer(e.target.value)}
                                    placeholder="Type your answer..."
                                    className="w-full p-3 border border-gray-300 rounded-lg"
                                    rows="3"
                                />
                            </div>
                        );
                    
                    default:
                        return (
                            <div className="space-y-4">
                                <p className="text-lg font-medium">{currentTask.question}</p>
                                {currentTask.hint && (
                                    <p className="text-sm text-gray-600">{currentTask.hint}</p>
                                )}
                                <input
                                    type="text"
                                    value={userAnswer}
                                    onChange={(e) => setUserAnswer(e.target.value)}
                                    placeholder="Type your answer..."
                                    className="w-full p-3 border border-gray-300 rounded-lg"
                                    onKeyPress={(e) => e.key === 'Enter' && checkAnswer()}
                                />
                                <div className="flex gap-2">
                                    <button
                                        onClick={isRecording ? stopRecording : startRecording}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-lg ${
                                            isRecording 
                                                ? 'bg-red-500 hover:bg-red-600' 
                                                : 'bg-blue-500 hover:bg-blue-600'
                                        } text-white`}
                                    >
                                        {isRecording ? <MicOff size={20} /> : <Mic size={20} />}
                                        Voice
                                    </button>
                                </div>
                            </div>
                        );
                }
            };

            const renderVocabulary = () => (
                <div className="space-y-6">
                    {Object.entries(vocabulary).map(([category, words]) => (
                        <div key={category} className="bg-white rounded-lg p-6 shadow-sm border">
                            <h3 className="text-xl font-semibold mb-4 text-pink-600">
                                {category === 'basic' ? 'üìù Basic Expressions' :
                                 category === 'bali' ? 'üå¥ Bali Lifestyle' : 
                                 category === 'savage' ? 'üî• Savage Mode' : 'üíï Romantic/Flirty'}
                            </h3>
                            <div className="grid gap-4">
                                {Object.entries(words).map(([word, info]) => (
                                    <div key={word} className="border-l-4 border-pink-200 pl-4">
                                        <div className="flex items-center justify-between">
                                            <h4 className="font-semibold text-lg">{word}</h4>
                                            <button
                                                onClick={() => speakText(word)}
                                                className="text-pink-500 hover:text-pink-700"
                                            >
                                                <Volume2 size={20} />
                                            </button>
                                        </div>
                                        <p className="text-gray-600">{info.definition}</p>
                                        <div className="flex items-center gap-2 mt-2">
                                            <p className="text-green-700 flex-1">{info.example}</p>
                                            <button
                                                onClick={() => speakText(info.example.split(' (')[0])}
                                                className="text-green-600 hover:text-green-800"
                                            >
                                                <Volume2 size={16} />
                                            </button>
                                        </div>
                                        <div className="mt-2">
                                            <p className="text-sm text-gray-500 mb-2">{info.forms}</p>
                                            {info.phrases && (
                                                <div className="space-y-1">
                                                    {info.phrases.map((phrase, index) => (
                                                        <div key={index} className="flex items-center gap-2">
                                                            <span className="text-sm text-pink-600">‚Ä¢ {phrase}</span>
                                                            <button
                                                                onClick={() => speakText(phrase)}
                                                                className="text-pink-500 hover:text-pink-700"
                                                            >
                                                                <Volume2 size={14} />
                                                            </button>
                                                        </div>
                                                    ))}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            );

            return (
                <div className="max-w-4xl mx-auto bg-gradient-to-b from-pink-50 to-purple-50 min-h-screen">
                    <div className="bg-gradient-to-r from-pink-500 to-purple-600 text-white p-6">
                        <h1 className="text-2xl font-bold flex items-center gap-2">
                            <Heart size={28} />
                            English Flirty Roasts - Practice
                        </h1>
                        <p className="mt-2 opacity-90">
                            Learn savage & flirty English expressions üíÖ‚ú®
                        </p>
                        <div className="mt-4 flex gap-4 text-sm">
                            <span>Correct: {score.correct}</span>
                            <span>Total: {score.total}</span>
                            <span>Accuracy: {score.total > 0 ? Math.round((score.correct / score.total) * 100) : 0}%</span>
                        </div>
                    </div>

                    <div className="flex border-b bg-white">
                        <button
                            onClick={() => setActiveTab('tasks')}
                            className={`flex-1 p-4 text-center font-medium ${
                                activeTab === 'tasks' 
                                    ? 'border-b-2 border-pink-500 text-pink-600' 
                                    : 'text-gray-600 hover:text-gray-800'
                            }`}
                        >
                            <MessageCircle className="mx-auto mb-1" size={20} />
                            Tasks
                        </button>
                        <button
                            onClick={() => setActiveTab('vocabulary')}
                            className={`flex-1 p-4 text-center font-medium ${
                                activeTab === 'vocabulary' 
                                    ? 'border-b-2 border-pink-500 text-pink-600' 
                                    : 'text-gray-600 hover:text-gray-800'
                            }`}
                        >
                            <Users className="mx-auto mb-1" size={20} />
                            Vocabulary
                        </button>
                    </div>

                    <div className="p-6">
                        {activeTab === 'tasks' && (
                            <div className="space-y-6">
                                <div className="flex gap-2 flex-wrap">
                                    <button
                                        onClick={() => setSelectedCategory('all')}
                                        className={`px-4 py-2 rounded-lg ${
                                            selectedCategory === 'all' 
                                                ? 'bg-pink-500 text-white' 
                                                : 'bg-white border hover:bg-pink-50'
                                        }`}
                                    >
                                        All Categories
                                    </button>
                                    <button
                                        onClick={() => setSelectedCategory('basic')}
                                        className={`px-4 py-2 rounded-lg ${
                                            selectedCategory === 'basic' 
                                                ? 'bg-pink-500 text-white' 
                                                : 'bg-white border hover:bg-pink-50'
                                        }`}
                                    >
                                        üìù Basic
                                    </button>
                                    <button
                                        onClick={() => setSelectedCategory('bali')}
                                        className={`px-4 py-2 rounded-lg ${
                                            selectedCategory === 'bali' 
                                                ? 'bg-pink-500 text-white' 
                                                : 'bg-white border hover:bg-pink-50'
                                        }`}
                                    >
                                        üå¥ Bali Life
                                    </button>
                                    <button
                                        onClick={() => setSelectedCategory('savage')}
                                        className={`px-4 py-2 rounded-lg ${
                                            selectedCategory === 'savage' 
                                                ? 'bg-pink-500 text-white' 
                                                : 'bg-white border hover:bg-pink-50'
                                        }`}
                                    >
                                        üî• Savage
                                    </button>
                                    <button
                                        onClick={() => setSelectedCategory('romantic')}
                                        className={`px-4 py-2 rounded-lg ${
                                            selectedCategory === 'romantic' 
                                                ? 'bg-pink-500 text-white' 
                                                : 'bg-white border hover:bg-pink-50'
                                        }`}
                                    >
                                        üíï Romantic
                                    </button>
                                </div>

                                <div className="bg-white rounded-lg p-6 shadow-sm border">
                                    {showResult !== null && (
                                        <div className={`mb-4 p-4 rounded-lg flex items-center gap-2 ${
                                            showResult 
                                                ? 'bg-green-100 text-green-800' 
                                                : 'bg-red-100 text-red-800'
                                        }`}>
                                            {showResult ? <CheckCircle size={20} /> : <XCircle size={20} />}
                                            {showResult ? 'Correct! üéâ' : `Wrong. Correct answer: ${currentTask?.answer || 'see options above'}`}
                                        </div>
                                    )}
                                    
                                    {renderTask()}
                                    
                                    {currentTask && (
                                        <div className="mt-6 flex gap-3">
                                            {showResult === null ? (
                                                <button
                                                    onClick={checkAnswer}
                                                    disabled={!userAnswer.trim()}
                                                    className="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed"
                                                >
                                                    Check
                                                </button>
                                            ) : (
                                                <button
                                                    onClick={generateRandomTask}
                                                    className="bg-pink-500 text-white px-6 py-2 rounded-lg hover:bg-pink-600 flex items-center gap-2"
                                                >
                                                    <RotateCcw size={16} />
                                                    Next Task
                                                </button>
                                            )}
                                            <button
                                                onClick={generateRandomTask}
                                                className="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 flex items-center gap-2"
                                            >
                                                <RotateCcw size={16} />
                                                Skip
                                            </button>
                                        </div>
                                    )}
                                </div>

                                {currentTask?.word && vocabulary[currentTask.category]?.[currentTask.word] && (
                                    <div className="bg-pink-50 rounded-lg p-4">
                                        <h3 className="font-semibold text-pink-800 mb-2">Current word:</h3>
                                        <div className="text-pink-700">
                                            <p className="font-medium">{currentTask.word}</p>
                                            <p className="text-sm">{vocabulary[currentTask.category][currentTask.word].forms}</p>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'vocabulary' && renderVocabulary()}
                    </div>
                </div>
            );
        };

        ReactDOM.render(React.createElement(EnglishRoastApp), document.getElementById('root'));
    </script>
</body>
</html>
